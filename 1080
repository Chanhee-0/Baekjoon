#include<iostream>
#include<string>
#include<list>
#include<vector>
#include<array>
#include<queue>
#include<set>
#include<map>
#include<cstdio>

using namespace std;
vector <int> va;
vector <int> vb;
int aa[50][50];
int ab[50][50];
void change(int n, int m) {
	for (int i = n; i < n + 3; i++) {
		for (int j = m; j < m + 3; j++) {
			if (aa[i][j] == 0)
				aa[i][j] = 1;
			else
				aa[i][j] = 0;
		}
	}
}
int main() {
	// ios::sync_with_stdio(false);
	cin.tie(NULL);
	cout.tie(NULL);

	

	int n, m, x = 0, y = 0;
	int cnt = 0;

	cin >> n >> m;

	for (int i = 0; i < n; i++) {
		for (int j = 0; j < m; j++) {
			cin >> x;
			va.push_back(x);
		}
	}
	for (int i = 0; i < n; i++) {
		for (int j = 0; j < m; j++) {
			cin >> x;
			vb.push_back(x);
		}
	}
	for (int i = 0; i < n; i++) {
		for (int j = 0; j < m; j++) {
			if (aa[i][j] != ab[i][j]) {
				if (i <= n - 3)
					x = i;
				else if (i == n - 2)
					x = i - 1;
				else if (i == n - 1)
					x = i - 2;
				if (j <= m - 3)
					y = j;
				else if (j == m - 2)
					y = j - 1;
				else if (j == m - 1)
					y = j - 2;
				change(x, y);
				cnt++;
			}
		}
	}
	for (int i = 0; i < n; i++) {
		for (int j = 0; j < m; j++) {
			if (aa[i][j] != ab[i][j])
				cout << "-1";
			else
				cout << cnt;
		}
	}


	return 0;
}
/*
1080 행렬
1. 처음부터 비교해서 다를 때 여유가 되면 거기 부터 되지않으면 중간을 찾아 다 바꿔줌
2. 비교
*/
